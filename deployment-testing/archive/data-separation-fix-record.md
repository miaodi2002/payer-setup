# æ•°æ®åˆ†ç¦»é—®é¢˜ä¿®å¤è®°å½•

## é—®é¢˜å‘ç°æ—¶é—´
- **æ—¥æœŸ**: 2025-07-24
- **å‘ç°è€…**: ç”¨æˆ·é€šè¿‡Athenaæ§åˆ¶å°æˆªå›¾
- **ä¸¥é‡ç¨‹åº¦**: é«˜ - è¿èƒŒ2æ•°æ®åº“è®¾è®¡æ ¸å¿ƒåŸåˆ™

## é—®é¢˜æè¿°
åœ¨éªŒè¯2æ•°æ®åº“è®¾è®¡æ—¶ï¼Œå‘ç°Pro formaæ•°æ®åº“(`athenacurcfn_730335480018`)ä¸­åŒ…å«äº†RISPæ•°æ®è¡¨ï¼Œè¿™è¿èƒŒäº†æ•°æ®åˆ†ç¦»çš„è®¾è®¡åŸåˆ™ã€‚

### å‘ç°çš„é”™è¯¯çŠ¶æ€
```
âŒ é”™è¯¯çŠ¶æ€:
athenacurcfn_730335480018 (Pro formaæ•°æ®åº“)
â”œâ”€â”€ cost_and_usage_data_status (RISPçŠ¶æ€è¡¨) âŒ
â””â”€â”€ risp_730335480018 (RISPæ•°æ®è¡¨) âŒ

athenacurcfn_risp_730335480018 (RISPæ•°æ®åº“)
â”œâ”€â”€ cost_and_usage_data_status (RISPçŠ¶æ€è¡¨) âœ… é‡å¤
â””â”€â”€ risp_730335480018 (RISPæ•°æ®è¡¨) âœ… é‡å¤
```

## æ ¹æœ¬åŸå› åˆ†æ

### 1. å†å²é—ç•™é—®é¢˜
- RISP Crawleræœ€åˆé…ç½®æ—¶æŒ‡å‘äº†é”™è¯¯çš„æ•°æ®åº“
- åœ¨åˆ›å»ºæ–°çš„RISPæ•°æ®åº“ä¹‹å‰ï¼ŒRISPæ•°æ®å·²ç»è¢«çˆ¬å–åˆ°Pro formaæ•°æ®åº“
- åç»­è™½ç„¶ä¿®æ­£äº†Crawleré…ç½®ï¼Œä½†æ—§æ•°æ®æœªæ¸…ç†

### 2. æŠ€æœ¯åŸå› 
- Glue Crawlerä¸ä¼šè‡ªåŠ¨æ¸…ç†ä¹‹å‰é”™è¯¯ä½ç½®çš„è¡¨
- è¡¨ä¸€æ—¦åˆ›å»ºï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤æ‰èƒ½æ¶ˆé™¤
- æ•°æ®å­˜åœ¨é‡å¤ï¼Œä½†å…ƒæ•°æ®å­˜å‚¨åœ¨ä¸åŒæ•°æ®åº“ä¸­

### 3. éªŒè¯ä¸è¶³
- åˆå§‹éƒ¨ç½²éªŒè¯åªæ£€æŸ¥äº†æ•°æ®åº“åˆ›å»ºï¼ŒæœªéªŒè¯æ•°æ®åˆ†ç¦»æ­£ç¡®æ€§
- ç¼ºå°‘é’ˆå¯¹è¡¨å†…å®¹å’Œä½ç½®çš„è¯¦ç»†æ£€æŸ¥

## ä¿®å¤è¿‡ç¨‹

### æ­¥éª¤1: è¯Šæ–­é—®é¢˜èŒƒå›´
```bash
# å‘ç°Pro formaæ•°æ®åº“ä¸­çš„é”™è¯¯RISPè¡¨
aws glue get-tables --database-name athenacurcfn_730335480018 --region us-east-1 \
  --query 'TableList[].{Name:Name,Location:StorageDescriptor.Location}' --output table

# ç¡®è®¤RISPæ•°æ®åº“ä¸­çš„æ­£ç¡®è¡¨
aws glue get-tables --database-name athenacurcfn_risp_730335480018 --region us-east-1 \
  --query 'TableList[].{Name:Name,Location:StorageDescriptor.Location}' --output table
```

### æ­¥éª¤2: æ¸…ç†é”™è¯¯æ•°æ®
```bash
# ä»Pro formaæ•°æ®åº“åˆ é™¤RISPç›¸å…³è¡¨
aws glue delete-table --database-name athenacurcfn_730335480018 --name cost_and_usage_data_status --region us-east-1
aws glue delete-table --database-name athenacurcfn_730335480018 --name risp_730335480018 --region us-east-1
```

### æ­¥éª¤3: éªŒè¯ä¿®å¤ç»“æœ
```bash
# ç¡®è®¤Pro formaæ•°æ®åº“å·²æ¸…ç©º
aws glue get-tables --database-name athenacurcfn_730335480018 --region us-east-1 --query 'TableList[].Name' --output table

# ç¡®è®¤RISPæ•°æ®åº“åŒ…å«æ­£ç¡®æ•°æ®
aws glue get-tables --database-name athenacurcfn_risp_730335480018 --region us-east-1 --query 'TableList[].Name' --output table
```

### æ­¥éª¤4: å¯åŠ¨æ­£ç¡®çš„æ•°æ®çˆ¬å–
```bash
# å¯åŠ¨Pro forma Crawlerç­‰å¾…çœŸæ­£çš„Pro formaæ•°æ®
aws glue start-crawler --name AWSCURCrawler-730335480018 --region us-east-1
```

## ä¿®å¤ç»“æœ

### âœ… ä¿®å¤åçš„æ­£ç¡®çŠ¶æ€
```
âœ… æ­£ç¡®çŠ¶æ€:
athenacurcfn_730335480018 (Pro formaæ•°æ®åº“)
â””â”€â”€ [ç©ºçš„ï¼Œç­‰å¾…Pro formaæ•°æ®ç”Ÿæˆ]

athenacurcfn_risp_730335480018 (RISPæ•°æ®åº“)
â”œâ”€â”€ cost_and_usage_data_status (RISPçŠ¶æ€è¡¨) âœ…
â””â”€â”€ risp_730335480018 (RISPæ•°æ®è¡¨) âœ…
```

### éªŒè¯å‘½ä»¤
```bash
# éªŒè¯æ•°æ®åˆ†ç¦»æ­£ç¡®æ€§
echo "Pro formaæ•°æ®åº“è¡¨æ•°é‡: $(aws glue get-tables --database-name athenacurcfn_730335480018 --region us-east-1 --query 'length(TableList)' --output text)"
echo "RISPæ•°æ®åº“è¡¨æ•°é‡: $(aws glue get-tables --database-name athenacurcfn_risp_730335480018 --region us-east-1 --query 'length(TableList)' --output text)"
```

## é¢„é˜²æªæ–½

### 1. æ›´æ–°éƒ¨ç½²éªŒè¯
- åœ¨æµ‹è¯•æ–‡æ¡£ä¸­æ·»åŠ æ•°æ®åˆ†ç¦»éªŒè¯æ­¥éª¤
- æ£€æŸ¥è¡¨çš„S3è·¯å¾„æ˜¯å¦ä¸æ•°æ®åº“ç±»å‹åŒ¹é…
- éªŒè¯ä¸å­˜åœ¨è·¨æ•°æ®åº“çš„é”™è¯¯æ•°æ®

### 2. æ”¹è¿›éƒ¨ç½²æµç¨‹
- åœ¨Crawleré…ç½®æ›´æ”¹åï¼Œæ¸…ç†æ—§ä½ç½®çš„é—ç•™æ•°æ®
- æ·»åŠ è‡ªåŠ¨åŒ–éªŒè¯è„šæœ¬æ£€æŸ¥æ•°æ®åˆ†ç¦»

### 3. æ–‡æ¡£æ”¹è¿›
- åœ¨æ•…éšœæ’é™¤éƒ¨åˆ†æ·»åŠ æ•°æ®åˆ†ç¦»é—®é¢˜çš„è¯Šæ–­å’Œä¿®å¤æ–¹æ³•
- æ›´æ–°æˆåŠŸæ ‡å‡†ï¼Œæ˜ç¡®åŒ…å«æ•°æ®åˆ†ç¦»æ£€æŸ¥

## ç»éªŒæ•™è®­

### æŠ€æœ¯æ–¹é¢
1. **Glueè¡¨ç®¡ç†**: Glueè¡¨ä¸€æ—¦åˆ›å»ºï¼Œä¸ä¼šè‡ªåŠ¨è¿ç§»æˆ–æ¸…ç†
2. **Crawlerè¡Œä¸º**: Crawleré…ç½®å˜æ›´ä¸å½±å“å·²å­˜åœ¨çš„è¡¨
3. **éªŒè¯é‡è¦æ€§**: å¿…é¡»éªŒè¯æ•°æ®çš„å®é™…åˆ†å¸ƒï¼Œè€Œéä»…æ£€æŸ¥èµ„æºå­˜åœ¨

### æµç¨‹æ–¹é¢
1. **æ¸è¿›éªŒè¯**: æ¯ä¸ªé…ç½®å˜æ›´åéƒ½éœ€è¦å…¨é¢éªŒè¯
2. **ç”¨æˆ·åé¦ˆ**: ç”¨æˆ·çš„å®é™…ä½¿ç”¨åé¦ˆæ˜¯å‘ç°é—®é¢˜çš„é‡è¦é€”å¾„
3. **æ–‡æ¡£å®Œæ•´æ€§**: éœ€è¦åŒ…å«å„ç§å¼‚å¸¸æƒ…å†µçš„å¤„ç†æ–¹æ³•

## åç»­è¡ŒåŠ¨
1. âœ… æ›´æ–°æµ‹è¯•æ–‡æ¡£åŒ…å«æ•°æ®åˆ†ç¦»éªŒè¯
2. âœ… æ›´æ–°æ•…éšœæ’é™¤æŒ‡å—
3. â³ ç­‰å¾…Pro formaæ•°æ®ç”Ÿæˆï¼ŒéªŒè¯å®Œæ•´çš„2æ•°æ®åº“è®¾è®¡
4. ğŸ“‹ è€ƒè™‘ä¸ºCloudFormationæ¨¡æ¿æ·»åŠ æ•°æ®æ¸…ç†é€»è¾‘

## å½±å“è¯„ä¼°
- **æ­£é¢å½±å“**: ä¿®å¤äº†è®¾è®¡ç¼ºé™·ï¼Œç¡®ä¿æ•°æ®æ­£ç¡®åˆ†ç¦»
- **ç”¨æˆ·ä½“éªŒ**: ç°åœ¨AthenaæŸ¥è¯¢å°†è®¿é—®æ­£ç¡®çš„æ•°æ®åº“å’Œè¡¨
- **ç³»ç»Ÿç¨³å®šæ€§**: æ¶ˆé™¤äº†æ•°æ®é‡å¤ï¼Œæé«˜äº†ç³»ç»Ÿä¸€è‡´æ€§
- **æœªæ¥ç»´æŠ¤**: ä¸ºåç»­ç±»ä¼¼é—®é¢˜å»ºç«‹äº†è¯Šæ–­å’Œä¿®å¤æµç¨‹